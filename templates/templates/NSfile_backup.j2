set ns [new Simulator]

source tb_compat.tcl

# Add nodes
set ${{ n1 }} [$ns node]
set ${{ n2 }} [$ns node]


# Set node OS from saved image
tb-set-node-os ${{ n1 }} Ubuntu1604-64-STD
tb-set-node-os ${{ n2 }} Ubuntu1604-64-STD


set lan0 [$ns make-lan "${{ n1 }} ${{ n2 }}" 10Gb 0ms]

# Set node ip.
tb-set-ip-lan ${{ n1 }} $lan0 {{ n1_gateway }}
tb-set-ip-lan ${{ n2 }} $lan0 {{ n2_gateway }}



# Set route and adjust configure.
$ns rtproto Static

# Go!
$ns run